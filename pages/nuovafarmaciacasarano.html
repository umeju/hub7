<!DOCTYPE html>
<html class="full">
    <head>
        <title>boostrapped</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" 
              rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" 
              crossorigin="anonymous">
        <style>

            h3 {
                display: inline-block;
                padding: 10px;
                background: #B9121B;
                border-top-left-radius: 10px;
                border-top-right-radius: 10px;
            }

            .full-screen {
                background-size: cover;
                background-position: center;
                background-repeat: no-repeat;
            }
            #hubNumber {
                position: fixed;
                top: 0;
                left: 0;
                width: 220px;
                height: 70px;
                background-color: rgba(0, 0, 0, 0.2);
                border: 1px solid #dd4814;
                z-index: 1;
                font-size: -webkit-xxx-large;
                text-align: center;
                color: #dd4814;
            }

        </style>
    </head>
    <body>
        <div id="hubNumber"></div>

        <div id="mycarousel" class="carousel slide" data-ride="carousel">
            <!-- Indicators -->
            <ol class="carousel-indicators">
                <li data-target="#mycarousel" data-slide-to="0" class=""></li>
                <li data-target="#mycarousel" data-slide-to="1"></li>

            </ol>

            <!-- Wrapper for slides -->
            <div class="carousel-inner" role="listbox">

                <div class="item">
                    <img src="https://unsplash.it/2000/1250?image=397" data-color="lightblue" alt="First Image">
                    <!--<div class="carousel-caption"><h3>First Image</h3></div>-->
                </div>

                <div class="item">
                    <img src="https://unsplash.it/2000/1250?image=689" data-color="firebrick" alt="Second Image">
                    <!--<div class="carousel-caption"><h3>Second Image</h3></div>-->
                </div>

                <div class="item">
                    <img src="https://unsplash.it/2000/1250?image=650" data-color="firebrick" alt="Second Image">
                    <!--<div class="carousel-caption"><h3>Second Image</h3></div>-->
                </div>

                <div class="item">
                    <img src="https://unsplash.it/2000/1250?image=649" data-color="firebrick" alt="Second Image">
                    <!--<div class="carousel-caption"><h3>Second Image</h3></div>-->
                </div>


            </div>

            <!-- Controls -->
            <a class="left carousel-control" href="#mycarousel" role="button" data-slide="prev">
                <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="right carousel-control" href="#mycarousel" role="button" data-slide="next">
                <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>


        </div>

        <script src="https://code.jquery.com/jquery-3.2.1.min.js" 
                integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" 
                crossorigin="anonymous">

        </script>

        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" 
                integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" 
                crossorigin="anonymous">

        </script>
        <script src="/socket.io/socket.io.js"></script>
        <script src="/varSocketURI.js"></script>

        <!-- GET SCRIPT FOR AUDIO
            <script src="../client/js/audio.js"></script>
        -->
        <script>
                    var $item = $('.carousel .item');
                    var $wHeight = $(window).height();
                    $item.eq(0).addClass('active');
                    $item.height($wHeight);
                    $item.addClass('full-screen');

                    $('.carousel img').each(function () {
                        var $src = $(this).attr('src');
                        var $color = $(this).attr('data-color');

                        $(this).parent().css({
                            'background-image': 'url(' + $src + ')',
                            'background-color': $color
                        });

                        $(this).remove();
                    });

                    $(window).on('resize', function () {
                        $wHeight = $(window).height();
                        $item.height($wHeight);
                    });

                    $('.carousel').carousel({
                        interval: 6000,
                        keyboard: true,
                        pause: "false"
                    });

                    $(document).bind('keydown', function (e) {
                        if (e.which == 39) {
                            $('.carousel').carousel('next');
                        } else if (e.which == 37) {
                            $('.carousel').carousel('prev');
                        }
                    });
        </script>

        <script>
            $(document).ready(function () {
                /* code to get params form url in html page */
                var QueryString = function () {
                    /* This function is anonymous, is executed immediately and 
                     the return value is assigned to QueryString!
                     */
                    var query_string = {};
                    var query = window.location.search.substring(1);
                    var vars = query.split("&");
                    for (var i = 0; i < vars.length; i++) {
                        var pair = vars[i].split("=");
                        // If first entry with this name
                        if (typeof query_string[pair[0]] === "undefined") {
                            query_string[pair[0]] = decodeURIComponent(pair[1]);
                            // If second entry with this name
                        } else if (typeof query_string[pair[0]] === "string") {
                            var arr = [query_string[pair[0]], decodeURIComponent(pair[1])];
                            query_string[pair[0]] = arr;
                            // If third or later entry with this name
                        } else {
                            query_string[pair[0]].push(decodeURIComponent(pair[1]));
                        }
                    }
                    return query_string;
                }();
                // get id from URL
                var userID = QueryString.ID;
//                var h = $(window).height();
//                var w = $(window).width();
                $('.right').click(function () {
                    console.log('right');
                });
                $('.left').click(function () {
                    console.log('left');
                });

                (function (exports) {
                    var socket = io.connect(socketURI);

                    socket.on('connection', function (data) {
                        console.log('socket connection on');
                    });

                    socket.on(userID + '-left', function (data) {
                        console.log(userID + ' left connect!');
                        $(".left").trigger('click');
                    });

                    socket.on(userID + '-right', function (data) {
                        console.log(userID + ' right connect!');
                        $(".right").trigger('click');
                    });

                    socket.on(userID + '-refresh', function (data) {
                        console.log('refresh');
                    });

                    /*
                     socket.on(userID + '-refresh2', function (data) {
                     console.log('refresh2');
                     });
                     socket.on(userID+'-OROSCOPO-changeNews', function (data) {
                     console.log('change news ch x');
                     });
                     socket.on(userID+'-SPORT-changeNews', function (data) {
                     console.log('change news ch x');
                     });
                     socket.on(userID+'-HI TECH-changeNews', function (data) {
                     console.log('change news ch x');
                     });
                     socket.on(userID+'-GOSSIP-changeNews', function (data) {
                     console.log('change news ch x');
                     });
                     socket.on(userID+"-ULTIM'ORA-changeNews", function (data) {
                     console.log('change news ch x');
                     });
                     socket.on(userID+"-RPI-changeNews", function (data) {
                     console.log('change news ch x');
                     });
                     socket.on(userID+'-tab0', function (data) {
                     $("#panel-0").trigger('click');
                     });
                     socket.on(userID+'-tab1', function (data) {
                     $("#panel-1").trigger('click');
                     });
                     socket.on(userID+'-tab2', function (data) {
                     $("#panel-2").trigger('click');
                     });
                     socket.on(userID+'-zoomOut', function (data) {
                     console.log('zoomOut');
                     });
                     */
                    exports.socket = socket;

                })(window);

//            Return a random number between 100000 and 1000000
                var randomN = Math.floor((Math.random() * 1000000) + 100000);

                if (!userID) {
                    
//               var r = confirm("Press a button!");
//               window.location.href = window.location.hostname+ "/pages/nuovafarmaciacasarano_remote.html?ID="+randomN;                
//                var randomN = prompt("INSERISCI IL CODICE CHE VEDI SUL MONITOR INTERATTIVO");
                    window.location.href = "nuovafarmaciacasarano.html?ID=" + randomN;
                }
                $('#hubNumber').html(userID);

            });
        </script>
        <!--script>
            $('.carousel').carousel({
                interval: 5000,
                keyboard: true,
                ride: true,
                pause: "hover"
            });
            $('#myCarousel').on('slide.bs.carousel', function () {
                // do something…
            });
        </script-->
    </body>
</html>
