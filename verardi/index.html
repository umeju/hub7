<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>hubanero chatty client</title>

        <link href="/client/style.css" rel="stylesheet"/>
        <link href="/client/css/bootstrap.min.css" rel="stylesheet">
        <link href="/client/css/style.css" rel="stylesheet">
        
        <script src="/socket.io/socket.io.js"></script>
        
        <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
        <!--script src="/common/handlebars.js"></script-->
        <!--<script src="/common/models.js"></script>-->
        <script src="/varSocketURI.js"></script>
        <script src="/client/code.js"></script>

    </head>
    <body class="radial">
        <!--div class="container">
            
  <h2>hubanero</h2>
        <!-- Trigger the modal with a button --
        <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Open Modal</button>
      
        <!-- Modal --
        <div class="modal fade" id="myModal" role="dialog">
          <div class="modal-dialog">
          
        <!-- Modal content--
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">
                <img class="mymodal-inner-logo" src="http://www.hubanero.it/hubanero-logo.png" />
            </h4>
          </div>
          <div class="modal-body">
            
              <p></p>
                
              <div class="interaction" id="benvenuto">
                  <div class="my-frame">
                      <div class="box-msg-1"></div>
                      <div class="box-msg-2"></div>
                  </div>
              </div>
            
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default ubu-orange" data-dismiss="modal">CHIUDI</button>
          </div>
        </div>
        
      </div>
    </div>
    
  </div-->

        <div class="container-fluid">
            <div class="row">

                <div class="col-md-12">
                    <div class="js-date"></div>

                    <div class="logoframe">
                        <div class="hublogo">
                            <!--img id="logo-hubanero" src="http://www.hubanero.it/hubanero-logo.png" width="250" /-->
                        </div>

                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">

                    <!--div class="tube">
                        <iframe width="600" height="450" 
                                src="https://www.youtube.com/embed/1w7OgIMMRc4?list=PLP4CGQEPAJPJbZOnCv7MgdWSoZzeaqBpm&autoplay=1&loop=1" 
                                frameborder="0" allowfullscreen></iframe>
                    </div-->
                    
                    <iframe width="320" height="240" class='playlist'
                            src="https://www.youtube.com/embed/NmugSMBh_iI?list=PLx0sYbCqOb8QTF1DCJVfQrtWknZFzuoAE&autoplay=0&loop=1" 
                            frameborder="0" allowfullscreen>
                    </iframe>
                    
                    <div class="row" id="nav-arrows">
                        <div class="col-md-4">
                            <img id="left" alt="Image Preview" 
                                 src="/common/img/left_arrow_sign.png" 
                                 class="img-circle" />
                        </div>
                        <div class="col-md-4">
                            <img id="right" alt="Image Preview" 
                                 src="/common/img/right_arrow_sign.png" 
                                 class="img-circle" />
                        </div>
                        <div class="col-md-4">
                            <img id="stop" alt="Image Preview" 
                                 src="/common/img/suremote-universal-remote-8-l-140x140.png" 
                                 class="img-circle" />
                        </div>
                    </div>                    

                </div>
                <div class="col-md-6">
                    <div class="my_carousel">
                        <div class="" id="carousel-859806">	
                            <!-- GENERATED NEWS CODE -->
                            <div class="my_inner">
                                

                                <!--div id="my_image_0" class="my_image">
                                    <img class="carousel_img" src="/common/img/1.jpg" />
                                </div>

                                <div id="my_image_4" class="my_image">
                                    <img class="carousel_img" src="/common/img/5.jpg" />
                                </div-->

                            </div>
                            
                            <a class="" href="#" data-slide="prev">
                                <span class="glyphicon glyphicon-chevron-left"></span>
                            </a> 
                            <a class="" href="#" data-slide="next">
                                <span class="glyphicon glyphicon-chevron-right"></span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <!-- use class allNews to visualize news from the web -->
                    <div class="iframe-wrapper">
                        <iframe class="iframes" src="http://www.di-vision.org/news/" 
                                scrolling="no" >
                        </iframe>
                    </div>
                </div>
            </div>
        </div>

        <script src="/client/js/bootstrap.min.js"></script>
        <script src="/client/js/scripts.js"></script>
        <!-- DATE JS-->
        <script>
            /*
             * data top right
             */
            var d = new Date();
            var month = d.getMonth() + 1;
            var day = d.getDate();

            var output = (('' + day).length < 2 ? '0' : '') + day + ' - ' +
                    (('' + month).length < 2 ? '0' : '') + month + ' - ' +
                    d.getFullYear();

            $('.js-date').html(output);
            
        </script>
        <script>
        var i = 9;
        var items = [];
        /*
        switch(testVar){
            case 'tech':
                var url = 'http://www.di-vision.org/feedOpenshift.php?news=tech&callback=?';
                break;
            
            case 'ultimora':
                var url = 'http://www.di-vision.org/feedOpenshift.php?news=ultimora&callback=?';
                break;
            
            case 'tech':
                var url = 'http://www.di-vision.org/feedOpenshift.php?news=tech&callback=?';
                break;
            case 'gossip':
                $url_flux_rss = 'http://www.rssnews.it/feed/gossip';
                break;
            default:
                //var url = 'http://www.di-vision.org/feedOpenshift.php?news=ultimora&callback=?';
                var url = 'http://www.di-vision.org/getNews.php?content_type=bottom_news&callback=?';
                break;
        }
        
        */
        var url = 'http://www.di-vision.org/getNews.php?content_type=my_news&callback=?';
        getNews(url);
        
        function jsonCallback(data) {
            
            console.log(data);
            
            count = 0;
            $.each(data.sites, function (key, val) {
                //items.push("<li>" + val.titolo + "<br/>" + val.descrizione + "</li>");
                if(val.titolo != ''){ // avoid empty news
                    items.push(
                        "<div class='notizia'>"
                        + "<div class='red_background shadow titolo'>" + val.titolo + "</div>"
                        // + val.descrizione to use html as text...
                        + "<div class='scroll_text descrizione'>" + val.descrizione + "</div>"
                        + "<div class='arr_2'>" + val.note + "</div>"
                        + "</div>");
                }
                count++;
            });
            
            $('.my_inner').append(items);
            //nascondo tutto e mostro la prima notizia
            $('.my_inner > *').hide();
            // use eq(count-2) coz the first element is empty
            $('.my_inner > *').eq(count-2).show();
        }

        function getNews(urlAddress) {

            $.ajax({
                type: 'GET',
                url: url,
                crossDomain: true,
                jsonp : false,
                cache:true,
                jsonpCallback: 'jsonCallback',
                dataType: 'jsonp',
                success: function (json) {
                    //$('.my_inner').append(items);
                },
                error: function (e) {
                    console.log(e.message);
                }
            });
        };
    </script>
    </body>
</html>
